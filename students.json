// ==================== ЛАБОРАТОРИЙН ДААЛГАВАР - JSON ФАЙЛ ====================

// Inline JSON өгөгдөл (students.json файл байхгүй бол энэ ашиглагдана)
const inlineStudentsJSON = [
  {
    "овог": "Бат",
    "нэр": "Эрдэнэ",
    "оюутныКод": "IT2023001",
    "нас": 21,
    "төрсөнОгноо": "2003-05-15",
    "голчДүн": 3.8,
    "чөлөөАвсан": true
  },
  {
    "овог": "Нэргүй",
    "нэр": "Болд",
    "оюутныКод": "IT2023002",
    "нас": 20,
    "төрсөнОгноо": "2004-02-28",
    "голчДүн": 3.5,
    "чөлөөАвсан": false
  },
  {
    "овог": "Цэцэг",
    "нэр": "Анх",
    "оюутныКод": "IT2023003",
    "нас": 22,
    "төрсөнОгноо": "2002-11-10",
    "голчДүн": 3.9,
    "чөлөөАвсан": true
  },
  {
    "овог": "Эрдэнэ",
    "нэр": "Нара",
    "оюутныКод": "IT2023004",
    "нас": 19,
    "төрсөнОгноо": "2005-07-22",
    "голчДүн": 3.2,
    "чөлөөАвсан": false
  },
  {
    "овог": "Ган",
    "нэр": "Баяр",
    "оюутныКод": "IT2023005",
    "нас": 23,
    "төрсөнОгноо": "2001-09-05",
    "голчДүн": 4.0,
    "чөлөөАвсан": true
  },
  {
    "овог": "Сүх",
    "нэр": "Сэлэнгэ",
    "оюутныКод": "IT2023006",
    "нас": 20,
    "төрсөнОгноо": "2004-03-18",
    "голчДүн": 3.6,
    "чөлөөАвсан": false
  },
  {
    "овог": "Отгон",
    "нэр": "Мөнх",
    "оюутныКод": "IT2023007",
    "нас": 21,
    "төрсөнОгноо": "2003-12-01",
    "голчДүн": 3.7,
    "чөлөөАвсан": true
  },
  {
    "овог": "Бат",
    "нэр": "Энх",
    "оюутныКод": "IT2023008",
    "нас": 22,
    "төрсөнОгноо": "2002-06-30",
    "голчДүн": 3.4,
    "чөлөөАвсан": false
  },
  {
    "овог": "Нэргүй",
    "нэр": "Тэнгэр",
    "оюутныКод": "IT2023009",
    "нас": 20,
    "төрсөнОгноо": "2004-08-14",
    "голчДүн": 3.8,
    "чөлөөАвсан": true
  },
  {
    "овог": "Цэцэг",
    "нэр": "Саран",
    "оюутныКод": "IT2023010",
    "нас": 21,
    "төрсөнОгноо": "2003-10-25",
    "голчДүн": 3.9,
    "чөлөөАвсан": true
  },
  {
    "овог": "Эрдэнэ",
    "нэр": "Алтан",
    "оюутныКод": "IT2023011",
    "нас": 19,
    "төрсөнОгноо": "2005-01-12",
    "голчДүн": 3.3,
    "чөлөөАвсан": false
  },
  {
    "овог": "Ган",
    "нэр": "Цагаан",
    "оюутныКод": "IT2023012",
    "нас": 23,
    "төрсөнОгноо": "2001-04-08",
    "голчДүн": 4.1,
    "чөлөөАвсан": true
  }
];

// Асинхрон AJAX GET - JSON файлаас оюутны мэдээллийг татах
function loadStudentsAsync() {
    console.log('Асинхрон AJAX GET хийж байна...');
    
    // 1. Эхлээд students.json файлаас уншихыг оролдох
    const jsonUrl = 'students.json';
    
    const xhr = new XMLHttpRequest();
    xhr.open('GET', jsonUrl, true);
    xhr.timeout = 3000; // 3 секундын дараа timeout
    
    xhr.onload = function() {
        if (xhr.status === 200) {
            try {
                const students = JSON.parse(xhr.responseText);
                console.log('✅ students.json файлаас амжилттай уншлаа:', students.length, 'оюутан');
                displayStudentsTable(students);
            } catch (e) {
                console.error('❌ JSON парслах алдаа:', e);
                console.log('⚠️ Inline JSON өгөгдөл ашиглаж байна...');
                displayStudentsTable(inlineStudentsJSON);
            }
        } else {
            console.error('❌ AJAX алдаа:', xhr.status);
            console.log('⚠️ Inline JSON өгөгдөл ашиглаж байна...');
            displayStudentsTable(inlineStudentsJSON);
        }
    };
    
    xhr.onerror = function() {
        console.error('❌ Сүлжээний алдаа гарлаа');
        console.log('⚠️ Inline JSON өгөгдөл ашиглаж байна...');
        displayStudentsTable(inlineStudentsJSON);
    };
    
    xhr.ontimeout = function() {
        console.error('❌ Timeout алдаа: JSON файл уншихад хэт удаж байна');
        console.log('⚠️ Inline JSON өгөгдөл ашиглаж байна...');
        displayStudentsTable(inlineStudentsJSON);
    };
    
    xhr.send();
}

// Оюутнуудын хүснэгт харуулах
function displayStudentsTable(students) {
    // ... (өмнөх displayStudentsTable() функцын код ижил)
}
